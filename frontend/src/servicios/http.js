export async function http(url, options={}, { timeoutMs=10000 } = {}) { const ctrl=new AbortController(); const id=setTimeout(()=>ctrl.abort("timeout"), timeoutMs); try{ const res=await fetch(url,{...options,signal:ctrl.signal}); if(!res.ok) throw new Error(`${res.status} ${res.statusText}`); const isJson=res.headers.get("content-type")?.includes("application/json"); return isJson?res.json():res.text(); } finally { clearTimeout(id); } }